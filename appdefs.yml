---

#
# Definitions for HandBrake docker container.
#
# This file is used as data source to generate README.md and unRAID template files
# from Jinja2 templates.
#

app:
  id: 3
  name: handbrake
  friendly_name: HandBrake
  gui_type: x11
  base_os: alpine
  project:
    description: |-
      HandBrake is a tool for converting video from nearly any format to a selection
      of modern, widely supported codecs.
    url: https://handbrake.fr
  unraid:
    support_url: https://forums.unraid.net/topic/57420-support-handbrake/
    category: "MediaApp:Video"
  documentation:
    overview: |-
      A fully automated mode is also available: drop files into a watch folder and let
      {{ app.friendly_name }} process them without any user interaction.
    sections:
      - title: Access to Optical Drives
        level: 2
        content: |-
          By default, a Docker container does not have access to host's devices. However,
          access to one or more devices can be granted with the `--device DEV` parameter
          of the `docker run` command.

          In Linux, optical drives are represented by device files named `/dev/srX`, where
          `X` is a number (e.g., `/dev/sr0` for the first drive, `/dev/sr1` for the
          second, etc). To allow {{ app.friendly_name }} to access the first drive, use
          this parameter:

          ```
          --device /dev/sr0
          ```

          To identify the correct Linux devices to expose, check the container's log
          during startup. Look for messages like:
          ```
          [cont-init   ] 54-check-optical-drive.sh: looking for usable optical drives...
          [cont-init   ] 54-check-optical-drive.sh: found optical drive 'hp HLDS DVDRW GUD1N LD02' [/dev/sr0]
          [cont-init   ] 54-check-optical-drive.sh:   [ OK ]   associated SCSI CD-ROM (sr) device detected: /dev/sr0.
          [cont-init   ] 54-check-optical-drive.sh:   [ ERR ]  the host device /dev/sr0 is not exposed to the container.
          [cont-init   ] 54-check-optical-drive.sh: no usable optical drives found.
          ```

          This indicates that `/dev/sr0` needs to be exposed to the container.

          > [!TIP]
          > View the container’s log by running `docker logs <container_name>`.

          Alternatively, identify Linux devices from the host by running:

          ```
          lsscsi -k
          ```

          The output's last column for an optical drive indicates the device to expose.
          The following example shows that `/dev/sr0` should be exposed:

          ```
          [0:0:0:0]    disk    ATA      SanDisk SSD PLUS 9100  /dev/sda
          [1:0:0:0]    disk    ATA      SanDisk SSD PLUS 9100  /dev/sdb
          [2:0:0:0]    disk    ATA      ST3500418AS      HP34  /dev/sdc
          [4:0:0:0]    cd/dvd  hp HLDS  DVDRW  GUD1N     LD02  /dev/sr0
          ```

          Since {{ app.friendly_name }} can decrypt DVD video discs, conversions can be
          performed directly from the optical device. In the GUI, click the `Open Source`
          button and browse to the optical drive device in the file system
          (e.g., `/dev/sr0`).
      - title: Automatic Video Conversion
        level: 2
        content: |-
          This container includes a built-in automatic video converter for
          batch-converting videos without user interaction.

          Files placed in the `/watch` container folder are automatically converted by
          {{ app.friendly_name }} to a predefined video format using a specified preset.

          All configuration parameters for the automatic video converter are set via
          environment variables. See the [Environment Variables](#environment-variables)
          section for available variables, particularly those starting with
          `AUTOMATED_CONVERSION_`.

          > [!NOTE]
          > Presets are identified by their category and name (e.g.,
          > `General/Very Fast 1080p30`).

          > [!NOTE]
          > All default and custom presets can be viewed and edited in the
          > {{ app.friendly_name }} GUI.

          > [!NOTE]
          > By default, converted videos are stored in the `/output` folder of the
          > container.

          > [!NOTE]
          > The status and progress of conversions can be monitored via the GUI or the
          > container’s log. View the log with `docker logs <container name>`, Full
          > conversion details are stored in `/config/log/hb/conversion.log` within the
          > container.
      - title: Multiple Watch Folders
        level: 3
        content: |-
          Additional watch folders can be used, such as:
            - `/watch2`
            - `/watch3`
            - `/watch4`
            - `/watch5`
            - etc.

          This is useful for scenarios where videos require different presets (e.g., one
          folder for movies and another for TV shows with distinct encoding quality
          requirements).

          By default, additional watch folders inherit the settings of the main `/watch`
          folder. To override a setting for a specific watch folder, append its index to
          the environment variable name. For example, to set the preset for `/watch2`, use
          `AUTOMATED_CONVERSION_PRESET_2`. For `/watch3`, use
          `AUTOMATED_CONVERSION_PRESET_3`, and so on.

          All settings prefixed with `AUTOMATED_CONVERSION_` can be overridden for each
          additional watch folder.

          The maximum number of watch folders is defined by the
          `AUTOMATED_CONVERSION_MAX_WATCH_FOLDERS` environment variable.

          > [!NOTE]
          > Each additional watch folder must be mapped to a host folder via a volume
          > mapping during container creation.

          > [!NOTE]
          > Each output folder defined via `AUTOMATED_CONVERSION_OUTPUT_DIR` must be
          > mapped to a host folder via a volume mapping during container creation.
      - title: Multiple Containers Capability
        level: 3
        content: |-
          Multiple container instances can operate on the same watch folder to increase
          throughput and parallelize video conversions. Each container monitors the folder
          independently and picks up available video files for processing.

          > [!NOTE]
          > The watch folder must be writable by all containers, since each container
          > creates a lock file in the folder before starting a conversion. This ensures
          > that no two containers process the same video at the same time.

          > [!NOTE]
          > To prevent already-converted videos from being picked up again, configure each
          > container to remove the source file once processing is finished. This can be
          > enforced by setting the `AUTOMATED_CONVERSION_KEEP_SOURCE` environment
          > variable to `0`.
      - title: Video Discs
        level: 3
        content: |-
          The automatic video converter supports video discs in the following format:
            - ISO image file
            - DVD video disc folder containing the `VIDEO_TS` folder
            - Blu-ray video disc folder containing the `BDMV` folder

          Folder names are case-sensitive. For example, `video_ts`, `Video_Ts`, or `Bdmv`
          are not treated as discs but as regular directories.

          For disc folders, the converted video file’s name matches the folder name.
          For example, `/watch/MyMovie/VIDEO_TS` produces `MyMovie.mp4`.

          Video discs may have multiple titles (e.g., main movie, previews, extras).
          Each title is converted to a separate file with a `.title-XX` suffix, where `XX`
          is the title number. For example, if `MyMovie.iso` has two titles, the output
          files are:
            - `MyMovie.title-1.mp4`
            - `MyMovie.title-2.mp4`

          Titles shorter than a specified duration can be ignored. By default, only titles
          longer than 10 seconds are processed, adjustable via the
          `AUTOMATED_CONVERSION_SOURCE_MIN_DURATION` environment variable.
      - title: Hooks
        level: 3
        content: |-
          Custom actions can be performed using hooks, which are shell scripts executed by
          the automatic video converter.

          > [!NOTE]
          > Hooks are always executed via `/bin/sh`, ignoring any shebang in the script.

          Hooks are optional and undefined by default. A hook is executed when a script is
          found at a specific location.

          The following table describes available hooks:

          | Container Location | Description | Parameter(s) |
          |--------------------|-------------|--------------|
          | `/config/hooks/pre_conversion.sh` | Executed before a video conversion begins. | The first argument is the path of the converted video. The second argument is the path to the source file. The third argument is the name of the Handbrake preset used for conversion. |
          | `/config/hooks/post_conversion.sh` | Executed when a video conversion completes. | The first parameter is the conversion status (`0` for success, any other value for failure). The second argument is the path to the converted video. The third argument is the path to the source file. The fourth argument is the name of the Handbrake preset used for conversion. |
          | `/config/hooks/post_watch_folder_processing.sh` | Executed after all videos in the watch folder are processed. | The path of the watch folder. |
          | `/config/hooks/hb_custom_args.sh` | Executed to obtain custom {{ app.friendly_name }} arguments for conversion. The script should print a space-separated list of arguments to its standard output. | The first argument is the path to the source file. The second argument is the name of the Handbrake preset used for conversion. |

          > [!TIP]
          > Example hooks are installed in `/config/hooks/` with a `.example` suffix. They
          > can be used as a starting point.

          > [!TIP]
          > Use the `INSTALL_PACKAGES` environment variable to install additional
          > packages needed by features implemented via hooks.
      - title: Temporary Conversion Directory
        level: 3
        content: |-
          Videos being converted are written to a hidden, temporary directory under the
          root of the output directory (`/output` by default). Once conversion completes
          successfully, the video file is moved to its final location.

          This feature is useful when the output folder is monitored by another
          application, ensuring it only sees the final converted file, not transient
          versions.

          If the monitoring application ignores hidden directories, no special
          configuration is needed.

          If the monitoring application processes hidden directories, set the
          `AUTOMATED_CONVERSION_OUTPUT_SUBDIR` environment variable to a subdirectory and
          configure the monitoring application to watch this subdirectory. For example,
          if `AUTOMATED_CONVERSION_OUTPUT_SUBDIR` is set to `TV Shows` and `/output` is
          mapped to `/home/user/appvolumes/HandBrake` on the host, monitor
          `/home/user/appvolumes/HandBrake/TV Shows`.
      - title: Intel Quick Sync Video
        level: 2
        content: |-
          Intel Quick Sync Video is Intel’s dedicated video encoding and decoding hardware
          core, offloading tasks to the integrated GPU to reduce CPU usage and improve
          power efficiency.

          For {{ app.friendly_name }} to use hardware-accelerated encoding, the following
          are required:
            - A compatible Intel processor. Check if your CPU supports Quick Sync Video on
              the [Intel Ark] website. The processor model is logged during container
              startup, e.g.:
              ```
              [cont-init.d] 54-check-qsv.sh: Processor: Intel(R) Core(TM) i7-2600 CPU @ 3.40GHz
              ```
            - The Intel i915 graphics driver must be loaded on the host.
            - The `/dev/dri` device must be exposed to the container using the
              `--device /dev/dri` parameter in the `docker run` command.

          When Intel Quick Sync Video is enabled, {{ app.friendly_name }} offers the
          `H.264 (Intel QSV)` video encoder. If this encoder is not listed, check the
          container’s log for details on the issue.

          > [!NOTE]
          > In most cases, {{ app.friendly_name }} can access `/dev/dri` without host
          > modifications, as the container’s user is automatically added to the group
          > owning the device. If the device is owned by the `root` group, use one of
          > these solutions:
          >   - Change the group owning the `/dev/dri` device on the host. For example,
          >     to set it to `video`:
          >     ```
          >     sudo chown root:video /dev/dri/*
          >     ```
          >   - Grant read/write permissions to all for the `/dev/dri` device on the host:
          >     ```
          >     sudo chmod a+wr /dev/dri/*
          >     ```
          >   - Run the container as root (`USER_ID=0`). Not recommended for security
          >     reason.

          [Intel Ark]: https://ark.intel.com/Search/FeatureFilter?productType=873&0_QuickSyncVideo=True
      - title: unRAID
        level: 3
        content: |-
          In recent unRAID versions, the Intel i915 driver is included and loaded
          automatically.

          For older versions, add the following lines to `/boot/config/go` to load the
          driver during unRAID startup:

          ```
          # Load the i915 driver.
          modprobe i915
          ```
      - title: Nightly Builds
        level: 2
        content: |-
          Nightly builds are based on the latest {{ app.friendly_name }} development code
          and may contain bugs, crashes, or instabilities.

          Nightly builds are available via Docker image tags in the format:

          ```
          nightly-<COMMIT_DATE>-<COMMIT_HASH>
          ```

          Where:
            - `COMMIT_DATE` is the date (in `YYMMDDHHMMSS` format) of the latest commit
              from the {{ app.friendly_name }} [Git repository].
            - `COMMIT_HASH` is the short hash of the latest commit.

          The latest nightly build is available via the `nightly-latest` tag. View all
          tags on [Docker Hub].

          To use a nightly build, append the tag to the Docker image name during container
          creation, e.g.:

          ```
          docker run [OPTIONS...] jlesage/{{ app.name }}:nightly-latest
          ```

          [Git repository]: https://github.com/HandBrake/HandBrake
          [Docker Hub]: https://hub.docker.com/r/jlesage/{{ app.name }}/tags/
      - title: Debug Builds
        level: 2
        content: |-
          Debug builds are used to investigate issues with {{ app.friendly_name }}. They
          are compiled in debug mode with all symbols retained, primarily for debugging
          crashes.

          To generate a core dump when {{ app.friendly_name }} crashes, two requirements
          must be met:
            1. Enable core dumps by setting the maximum core size using the
               `--ulimit core=-1` parameter in the `docker run` command (`-1` means
               unlimited).
            2. Set the core dump location on the host with:

               ```
               echo 'CORE_PATTERN' | sudo tee /proc/sys/kernel/core_pattern
               ```

               Replace `CORE_PATTERN` with a template for naming core dump files. For
               example, to store core dumps in the container’s configuration volume (for
               easy host access), use `/config/core.%e.%t`.

          > [!NOTE]
          > Core dump files contain the application’s complete memory layout and are
          > created with restrictive permissions. To allow access by a user other than the
          > one running {{ app.friendly_name }}, run `chmod a+r CORE`, where `CORE` is the
          > path to the core file.

          > [!NOTE]
          > The core dump pattern is shared between the host and container. Revert to the
          > original pattern after debugging by checking the current pattern with
          > `cat /proc/sys/kernel/core_pattern`.

          Debug builds are available via Docker image tags with a `debug` suffix. Check
          available tags on [Docker Hub].

          To use a debug build, append the tag to the Docker image name, e.g.:

          ```
          docker run [OPTIONS...] jlesage/{{ app.name }}:v1.14.3-debug
          ```

          [Docker Hub]: https://hub.docker.com/r/jlesage/{{ app.name }}/tags/
      - title: unRAID
        level: 3
        content: |-
          On unRAID systems, add the `--ulimit core=-1` parameter to the
          `Extra Parameters` field in the container settings.
  changelog:
    - version: 25.10.1
      date: 2025-10-13
      changes:
        - 'Automatic Video Converter: Lock the video file before checking its stability.'
        - 'Automatic Video Converter: Enhanced cleanup performed during container shutdown.'
    - version: 25.09.2
      date: 2025-09-27
      changes:
        - 'When possible, create a lock in the watch folder before starting conversion. This allows multiple containers to work on the same watch folder.'
    - version: 25.09.1
      date: 2025-09-06
      changes:
        - 'Updated HandBrake to version 1.10.2.'
    - version: 25.07.2
      date: 2025-07-27
      changes:
        - 'Updated gmmlib to version 22.8.1.'
        - 'Updated Intel Media Driver to version 25.5.6.'
        - 'Updated OneVPL GPU Runtime to version 25.2.6.'
        - 'Take ownership of the output directory only if it is not writable.'
        - 'Updated baseimage to version 4.9.0.'
    - version: 25.07.1
      date: 2025-07-05
      changes:
        - 'Updated baseimage to version 4.8.2, which brings the following changes:'
        - '2:Fixed automatic reconnect of the web interface when web authentication is enabled.'
        - '2:Fixed some resources that could not be accessed behind a reverse proxy based on URL path.'
    - version: 25.06.3
      date: 2025-06-29
      changes:
        - 'Fixed an issue where trash-related environment variables for each watch folder were not honored.'
    - version: 25.06.2
      date: 2025-06-25
      changes:
        - 'Updated baseimage to version 4.8.1, which brings the following changes:'
        - '2:Fixed crash with some binaries on systems using old kernel.'
    - version: 25.06.1
      date: 2025-06-23
      changes:
        - 'Automatic Video Converter: Disabled QSV decoding by default (like the GUI) to prevent potential crashes.'
        - 'Automatic Video Converter: Added the ability to customize the trash directory location.'
        - 'Automatic Video Converter: Added the ability to customize the watch folder directory location.'
        - 'Automatic Video Converter: Added hook that can be used to provide custom conversion arguments to HandBrake.'
        - 'Updated gmmlib to version 22.7.2.'
        - 'Updated Intel Media Driver to version 25.1.4.'
        - 'Updated Intel OneVPL GPU runtime to version 25.1.4.'
        - 'Updated baseimage to version 4.8.0, which brings the following changes:'
        - '2:Added automatic reconnect support of the web interface.'
        - '2:Added web file manager.'
        - '2:Updated noVNC to version 1.6.0.'
        - '2:Updated web UI components (Bootstrap).'
        - '2:Do not ask VNC password when accessing the web interface and web authentication is enabled.'
    - version: 25.02.3
      date: 2025-02-23
      changes:
        - 'Updated HandBrake to version 1.9.2.'
    - version: 25.02.2
      date: 2025-02-12
      changes:
        - 'Updated HandBrake to version 1.9.1.'
        - 'Updated Intel OneVPL GPU Runtime to version 24.4.4.'
        - 'Report the case where an optical drive cannot be used because of an improper user namespace configuration.'
    - version: 25.02.1
      date: 2025-02-09
      changes:
        - 'Updated gmmlib to version 22.6.0.'
        - 'Updated Intel Media Driver to version 24.4.4.0'
        - 'Improved detection of optical drive usability issues.'
        - 'Updated baseimage to version 4.7.1, which brings the following changes (since last used version):'
        - '2:Added environment variable that allows configuring the web authentication token lifetime.'
        - '2:Fixed compatibility issues that were introduced with support of GTK4 applications.'
        - '2:Increased the default service ready timeout from 5 seconds to 10 seconds and allow ^Cntime adjustment via environment variable.'
        - '2:Rebuild against latest distro images to get security fixes.'
    - version: 24.12.1
      date: 2024-12-07
      changes:
        - 'Updated HandBrake to version 1.9.0.'
        - 'Updated gmmlib to version 22.5.4.'
        - 'Updated Intel Media Driver to version 24.3.4.'
        - 'Updated Intel OneVPL GPU runtime to version 24.3.4.'
        - 'Updated baseimage to version 4.6.7, which brings the following changes:'
        - '2:Fixed web authentication feature with URL path-based reverse proxy.'
        - '2:Fixed web audio feature with URL path-based reverse proxy.'
        - '2:Fixed TLS secure connection method for VNC that was preventing web access.'
        - '2:Fixed CJK font installation.'
        - '2:Rebuild against latest distro images to get security fixes.'
    - version: 24.09.1
      date: 2024-09-14
      changes:
        - 'Updated HandBrake to version 1.8.2.'
        - 'Updated libva to version 2.22.0.'
        - 'Updated gmmlib to version 22.5.0.'
        - 'Updated Intel Media Driver to version 24.2.5.'
        - 'Updated Intel OneVPL GPU Runtime to version 24.2.5.'
        - 'Added environment variable to control the HandBrake GUI queue startup action.'
    - version: 24.06.1
      date: 2024-06-30
      changes:
        - 'Updated HandBrake to version 1.8.1.'
        - 'Updated libva to version 2.21.0.'
        - 'Updated gmmlib to version 22.4.0.'
        - 'Updated Intel Media Driver to version 24.1.5.'
        - 'Updated Intel OneVPL GPU runtime to version 24.1.5.'
        - 'Updated baseimage to version 4.6.3, which brings the following changes:'
        - '2:Audio support through web browser.'
        - '2:Web authentication support.'
        - '2:Better support of GTK4 applications.'
        - '2:Updated noVNC to version 1.5.0.'
        - '2:Updated web UI components (Bootstrap, Font Awesome).'
        - '2:When connecting, the control bar is now temporarily shown only once.'
        - '2:During package mirror setup, make sure to keep permissions of copied files.'
    - version: 24.03.1
      date: 2024-03-04
      changes:
        - 'Updated HandBrake to version 1.7.3.'
    - version: 24.01.2
      date: 2024-01-13
      changes:
        - 'Issue where Linux device of an optical drive could not be opened is now really fixed.'
    - version: 24.01.1
      date: 2024-01-12
      changes:
        - 'Fixed issue where Linux device of an optical drive could not be opened.'
        - 'Updated baseimage to version 4.5.3, which brings the following changes:'
        - '2:Disabled fullscreen support when page is loaded into an iFrame.'
        - '2:Rebuilt against latest distro images to get security fixes.'
    - version: 23.12.2
      date: 2023-12-24
      changes:
        - 'Updated HandBrake to version 1.7.2.'
    - version: 23.12.1
      date: 2023-12-17
      changes:
        - 'Adjusted QSV check script to handle Atom microarchitectures.'
        - 'Fixed issue with the automatic video converter where removing a video file could block.'
        - 'Enabled AVX-512 optimizations for SVT-AV1.'
    - version: 23.11.5
      date: 2023-11-30
      changes:
        - 'Fixed QSV issue caused by the oneVPL runtime implementation not being selected for Intel CPUs/GPUs requiring it.'
    - version: 23.11.4
      date: 2023-11-22
      changes:
        - 'Updated HandBrake to version 1.7.1.'
    - version: 23.11.3
      date: 2023-11-19
      changes:
        - 'Updated HandBrake to version 1.7.0.'
        - 'Improved QSV checks.'
        - 'Updated baseimage to version 4.5.2, which brings the following changes:'
        - '2:Fixed issue that would cause the helper that takes ownership of a directory to fail when using a very high user or group ID.'
    - version: 23.11.2
      date: 2023-11-11
      changes:
        - 'Updated Intel Media Driver to version 23.3.5.'
        - 'Updated Intel Media SDK to version 23.2.2.'
        - 'Updated Intel OneVPL GPU runtime to version 23.3.4.'
    - version: 23.11.1
      date: 2023-11-10
      changes:
        - 'Updated baseimage to version 4.5.1, which brings the following changes:'
        - '2:Mirror for packages installation can be set via the `PACKAGES_MIRROR` environment variable.'
        - '2:Improved the way the `take-ownership` script is working.'
        - '2:Readiness and minimum running time checks should not be done for a service defined with an interval.'
        - '2:Raise an error when a synched service fails to start.'
        - '2:Minimum running time check of a service was using an incorrect way to verify if process is still alive.'
        - '2:Fixed installation of CJK font.'
    - version: 23.10.1
      date: 2023-10-10
      changes:
        - 'Updated libva to version 2.20.0.'
        - 'Updated gmmlib to version 22.3.12.'
        - 'Updated Intel Media Driver to version 23.2.4.'
        - 'Updated Intel OneVPL GPU Runtime to version 23.2.4.'
    - version: 23.06.1
      date: 2023-06-08
      changes:
        - 'Updated libva to version 2.18.'
        - 'Updated gmmlib to version 22.3.5.'
        - 'Updated Intel Media Driver to version 23.1.6.'
        - 'Updated OneVPL GPU Runtime to version 23.1.5.'
        - 'Validate the output folder used by the Automatic Video Converter.'
        - 'Updated baseimage to version 4.4.2, which brings the following changes:'
        - '2:Rebuilt against latest distro images to get security fixes.'
        - '2:Updated X server to version 1.20.14.'
    - version: 23.04.1
      date: 2023-04-29
      changes:
        - 'Updated baseimage to version 4.4.1, which brings the following changes:'
        - '2:Updated TigerVNC to version 1.13.1.'
    - version: 23.03.2
      date: 2023-03-05
      changes:
        - 'Fixed issue where the Automatic Video Converter was not running with the correct supplementary groups.'
    - version: 23.03.1
      date: 2023-03-05
      changes:
        - 'Fixed `AUTOMATED_CONVERSION_NO_GUI_PROGRESS` environment variable not being handled.'
        - 'Make sure the Automatic Video Converter does not report conversion progress to GUI when it is disabled.'
        - 'Improved QSV checks by handling virtualized hosts.'
        - 'Updated baseimage to version 4.4.0, which brings the following changes:'
        - '2:Updated components providing access to application''s UI over web.'
        - '2:Improved web UI usage with touch devices.'
        - '2:Fixed issue with initialization of Linux users and groups when the `GROUP_ID` is also part of `SUP_GROUP_IDS`.'
    - version: 23.02.1
      date: 2023-02-26
      changes:
        - 'Updated HandBrake to version 1.6.1.'
        - 'Updated libva, gmmlib, Intel Media Driver, Intel Media SDK and Intel OneVPL.'
        - 'The Automatic Video Converter now has the ability to move source files to trash instead of removing them.'
        - 'Improved robustness of the Automatic Video Converter.'
        - 'Added the ability to disable the HandBrake GUI.'
        - 'Added the ability to disable the Automatic Video Converter.'
        - 'Versioning scheme of the Docker image changed to `YY.MM.SEQUENCE`.'
        - 'Update of the baseimage to version 4.3.6 brings the following new features:'
        - '2:Support for dark mode.'
        - '2:Support for remote window resize.'
        - '2:Updated the web UI with a new, simplified and less intrusive look.'
    - version: 1.25.1
      date: 2022-06-28
      changes:
        - 'Fixed the Automatic Video Converter not working due to usage of undefined variable.'
        - 'The Automatic Video Converter now correctly uses the main feature detection.'
    - version: 1.25.0
      date: 2022-06-27
      changes:
        - 'Updated HandBrake to version 1.5.1.'
        - 'Updated libva to version 2.14.0.'
        - 'Updated gmmlib to version 22.1.4.'
        - 'Updated Intel Media Driver to version 22.3.1.'
        - 'Updated Intel Media SDK to version 22.3.0.'
        - 'Updated x264 library to get support for the H.264 10bit encoder.'
        - 'Added the `AUTOMATED_CONVERSION_SOURCE_MAIN_TITLE_DETECTION` environment variable that enables main feature title detection of HandBrake.'
        - 'Now using baseimage version 3.5.8, based on Alpine Linux 3.14, which brings the following changes:'
        - '2:Updated installed packages to get latest security fixes.'
    - version: 1.24.2
      date: 2021-10-04
      changes:
        - 'Updated HandBrake to version 1.4.2.'
        - 'Updated Intel Media SDK to version 21.3.5.'
        - 'Updated gmmlib to version 21.3.1.'
    - version: 1.24.1
      date: 2021-08-21
      changes:
        - 'Updated Handbrake to version 1.4.1.'
    - version: 1.24.0
      date: 2021-07-19
      changes:
        - 'Updated Handbrake to version 1.4.0.'
        - 'Updated libva to version 2.12.0.'
        - 'Updated gmmlib to version 21.2.1.'
        - 'Updated Intel Media Driver to version 21.2.3.'
        - 'Updated Intel Media SDK to version 21.2.3.'
        - 'Now using baseimage version 3.5.7, which brings the following changes:'
        - '2:Updated installed packages to get latest security fixes.'
    - version: 1.23.2
      date: 2021-03-13
      changes:
        - 'Fixed issue where the wrong parameter was passed to the post watch folder processing hook.'
    - version: 1.23.1
      date: 2021-02-06
      changes:
        - 'Fixed an issue where the automatic video converter would not process Blu-ray video disc folder.'
    - version: 1.23.0
      date: 2021-01-01
      changes:
        - 'Added the ability to overwrite the output file if it exists.'
        - 'Added the ability to define the file extensions to be considered as video files.'
        - 'Updated libva to version 2.10.0.'
        - 'Updated gmmlib to version 20.4.1.'
        - 'Updated Intel Media Driver to version 20.4.5.'
        - 'Updated Intel Media SDK to version 20.5.1.'
        - 'Now using baseimage based on Alpine 3.12.'
    - version: 1.22.4
      date: 2020-08-05
      changes:
        - 'Upgraded libva to version 2.8.0.'
        - 'Upgraded Intel Media SDK to version 20.2.1.'
        - 'Upgraded Intel Media Driver to version 20.2.0.'
        - 'Fixed an issue where non-video files would fail to be copied.'
        - 'Now using baseimage version 3.5.6, which brings the following changes:'
        - '2:Other small adjustments for the YAD log monitor target.'
    - version: 1.22.3
      date: 2020-06-22
      changes:
        - 'Upgraded HandBrake to version 1.3.3.'
        - 'Upgraded Intel VAAPI driver to version 2.4.1.'
        - 'Now using Alpine 3.11 baseimage.'
    - version: 1.22.2
      date: 2020-05-26
      changes:
        - 'Fixed issue where Intel QSV H.265 encoding would fail.'
    - version: 1.22.1
      date: 2020-05-09
      changes:
        - 'Fixed the default preset used by the automatic video converter.'
        - 'Fixed an issue where progress of a multi-pass encoding done by the automatic video converter would not be displayed correctly in the UI.'
    - version: 1.22.0
      date: 2020-05-04
      changes:
        - 'Upgraded HandBrake to version 1.3.2.'
        - '2:NOTE: Presets are now identified with their category. This means that any preset configured for the automatic video converter needs to be adjusted.'
        - 'Upgraded libva to version 2.7.1.'
        - 'Upgraded Intel Media Driver to version 20.1.1.'
        - 'Upgraded Intel Media SDK to version 20.1.1.'
    - version: 1.21.0
      date: 2020-03-08
      changes:
        - 'Custom packages for the Automatic Video Converter can now be installed via the `AUTOMATED_CONVERSION_INSTALL_PKGS` environment variable.'
    - version: 1.20.0
      date: 2020-02-10
      changes:
        - 'Upgraded HandBrake to version 1.3.1.'
        - 'Upgraded libva to version 2.6.1.'
        - 'Upgraded Intel Media SDK to version 19.4.0.'
        - 'Upgraded Intel Media Driver to version 19.4.0.'
        - 'Upgraded Intel VAAPI driver to version 2.4.0.'
    - version: 1.19.0
      date: 2019-12-08
      changes:
        - 'Added the ability to set a list of file extensions to be considered as non-video files. This fixes an issue where the automatic video converter would successfully convert non-video files, like images.'
        - 'Added the ability to provide custom arguments to HandBrake when it is invoked by the automatic video converter.'
    - version: 1.18.0
      date: 2019-11-11
      changes:
        - 'Upgraded HandBrake to version 1.3.0.'
        - 'Action to take by the automatic video converter for non-video files is now configurable.'
        - 'The automatic video converter now fails the conversion if no title is found in video file.'
        - 'Now using baseimage v3.5.3, based on Alpine Liux 3.10, which brings the following changes:'
        - '2:Updated installed packages to get latest security fixes.'
        - '2:Make sure the tzdata is installed.'
    - version: 1.17.1
      date: 2019-05-04
      changes:
        - 'Fixed an issue where the progress output of the automatic video converter would hang.'
        - 'Enhanced the progress output of the automatic video converter by showing the path of the video being converted.'
        - 'Enhanced the progress output of the automatic video converter by adjusting the frequency of messages.'
    - version: 1.17.0
      date: 2019-04-26
      changes:
        - 'Progress of conversions performed by the automatic video converter can be seen in the HandBrake GUI.'
        - 'Fixed an issue where a video conversion failure would not be detected.'
        - 'Now using baseimage v3.5.2, which brings the following changes:'
        - '2:Updated installed packages to get latest security fixes.'
        - '2:Fixed issue where the container could have a zombie process.'
        - '2:Fixed issue where the password would not be submitted when pressing the enter key in the password modal.'
        - '2:Use relative path for favicon ressources to be more friendly with reverse proxy senarios.'
    - version: 1.16.0
      date: 2019-03-25
      changes:
        - 'Upgraded HandBrake to version 1.2.2.'
        - 'Upgraded libva to version 2.4.0.'
        - 'Upgraded Intel Media SDK to version 18.4.1.'
        - 'Upgraded Intel Media Driver to version 18.4.1.'
        - 'Use baseimage based on Alpine Linux 3.9.'
        - 'The number of watch folders is now configurable.'
        - 'The root output directory used by the automatic video converter is now configurable.'
        - 'Added hook invoked after all files in a watch folder are processed.'
    - version: 1.15.1
      date: 2019-02-12
      changes:
        - 'Fixed issue where Intel QSV would not be setup properly when its associated Linux devices where having different owners.'
    - version: 1.15.0
      date: 2019-01-14
      changes:
        - 'Upgraded HandBrake to version 1.2.0.'
        - 'The automatic video converter now creates the output folder just before moving the video.'
    - version: 1.14.11
      date: 2018-12-10
      changes:
        - 'Fixed issue where libraries required to use Intel QSV would not be found.'
    - version: 1.14.10
      date: 2018-12-10
      changes:
        - 'Fixed issues related to usage of QSV on recent processors:'
        - '2:Added Intel Media driver version 18.3.0.'
        - '2:Upgraded Intel VAAPI driver to version 2.3.0.'
        - '2:Upgraded to Intel Media SDK to version 18.3.1.'
        - '2:Upgraded libva to version 2.3.0.'
        - '2:By default, the new Intel Media driver is now used.'
        - '2:For processors not supported by the Intel Media driver, use the Intel VAAPI driver.'
    - version: 1.14.9
      date: 2018-11-12
      changes:
        - 'The automatic video converter now processes older files first.'
        - 'Fixed an issue where the automatic video converter would fail to start when `USER_ID` is set to `0`.'
        - 'Do not setup supplementary group if device for Intel QSV is already accessible.'
        - 'Added a new log message for a scenario where Intel QSV would not work.'
    - version: 1.14.8
      date: 2018-09-19
      changes:
        - 'Now using baseimage v3.5.1, which brings the following changes:'
        - '2:Updated installed packages to get latest security fixes.'
    - version: 1.14.7
      date: 2018-09-11
      changes:
        - 'Upgraded to HandBrake version 1.1.2.'
        - 'Fixes to the automatic video converter:'
        - '2:Gracefully handle the case where the pre-conversion hook removes the source video file.'
        - '2:Skip unreadable files.'
        - '2:Drop root privileges at start.'
        - '2:Better handling of unexisting cache files.'
    - version: 1.14.6
      date: 2018-07-30
      changes:
        - 'Fixed an issue where the automatic video converter would fail to convert video with multiple titles.'
        - 'Make sure to apply the `HANDBRAKE_DEBUG` environment variable to the automatic video converter.'
    - version: 1.14.5
      date: 2018-07-19
      changes:
        - 'A video being converted is now written to a temporary directory before being moved to its final location.'
    - version: 1.14.4
      date: 2018-07-17
      changes:
        - 'Fixed an issue where HandBrake could crash while encoding a video using x264.'
    - version: 1.14.3
      date: 2018-07-16
      changes:
        - 'Added support for debug images.'
    - version: 1.14.2
      date: 2018-07-13
      changes:
        - 'Upgraded HandBrake to version 1.1.1.'
        - 'Reduced the size of the container image.'
    - version: 1.14.1
      date: 2018-07-12
      changes:
        - 'Fixed an issue where the automatic video converter would not be able to access the device required to enable Intel Quick Sync Video hardware-accelerated encoding.'
    - version: 1.14.0
      date: 2018-07-09
      changes:
        - 'Added support for Intel Quick Sync Video hardware-accelerated encoding.'
        - 'Now using baseimage v3.4.0, which is based on Alpine Linux 3.8.'
        - 'Fixed issue where selecting a different video encoder would result in incorrect video preset selection.'
        - 'Fixed an issue where the automatic video converter would choose an incorrect output subfolder when `SAME_AS_SRC` is used.'
        - 'Fixed an issue where the automatic video converter, during source cleanup, would try to remove the watch folder itself.'
        - 'Fixed an issue where the automatic video converter would choose an incorrect output filename when the source is a DVD/Blu-Ray folder.'
    - version: 1.13.5
      date: 2018-06-18
      changes:
        - 'Fixed nightly build.'
    - version: 1.13.4
      date: 2018-06-11
      changes:
        - 'Fixed nightly build.'
    - version: 1.13.3
      date: 2018-05-21
      changes:
        - 'Moved the HandBrake debug log under the proper directory.'
        - 'Fixed the nightly build.'
    - version: 1.13.2
      date: 2018-05-09
      changes:
        - 'Fixed issue where handling DVD structure would cause a crash.'
    - version: 1.13.1
      date: 2018-04-26
      changes:
        - 'Improved fix for FLAC encoder crash.'
    - version: 1.13.0
      date: 2018-04-09
      changes:
        - 'Upgraded HandBrake to version 1.1.0.'
    - version: 1.12.0
      date: 2018-03-22
      changes:
        - 'Added pre-conversion hook for the automatic video converter.'
        - 'Added support for creation of image based on the latest HandBrake development code.'
        - 'Switched to a baseimage based on Alpine Linux 3.7.'
    - version: 1.11.5
      date: 2018-03-02
      changes:
        - 'Now using baseimage v3.3.4, which brings the following changes (since last used version):'
        - '2:Make sure the log monitor is started after the X server.'
        - '2:Fixed an issue where the log monitor `yad` target would use XDG folders of the application.'
        - '2:Fixed issue where log monitor states were not cleared during container startup.'
    - version: 1.11.4
      date: 2018-03-01
      changes:
        - 'Since HandBrake doesn''t work well with ffmpeg, reverted to libav.'
        - 'Thus, the FLAC encoder crash has been fixed in libav instead.'
        - 'Make sure the main window is always visible in background.'
    - version: 1.11.3
      date: 2018-02-13
      changes:
        - 'Fixed an issue where encoding audio to FLAC would cause a crash.'
        - 'Use AAC encoder from libavcodec.'
        - 'Fixed an issue where automatic conversion of a multi-titles medias would produce only the first one.'
        - 'Improved logging of the automatic video converter while processing multi-titles medias.'
    - version: 1.11.2
      date: 2018-02-03
      changes:
        - 'Now using baseimage v3.3.2, which brings the following changes:'
        - '2:Restored timezone support in Alpine Linux images with glibc.'
        - '2:Fixed issue in `add-pkg` helper where a package could be incorrectly detected as installed.'
    - version: 1.11.1
      date: 2018-01-30
      changes:
        - 'Now using baseimage v3.3.1, which brings the following changes:'
        - '2:Adjusted the way some ressources are accessed to better support reverse proxy to the container.'
    - version: 1.11.0
      date: 2018-01-22
      changes:
        - 'Now using baseimage v3.3.0, which brings the following changes (since last used version):'
        - '2:For Alpine Linux images with glibc, automatically update dynamic linker''s cache after new libraries are installed.'
        - '2:Fixed the LANG environment variable not being set properly.'
        - '2:Added the ability to automatically install a CJK (Chinese/Japanese/Korean) font.'
    - version: 1.10.0
      date: 2018-01-18
      changes:
        - 'Added support for multiple watch folders.'
        - 'Added environment variable to set the interval at which the automatic video converter checks for new files.'
        - 'Source file and HandBrake preset name are now passed to the post hook script.'
    - version: 1.9.4
      date: 2018-01-11
      changes:
        - 'Now using baseimage v3.2.2, which brings the following changes (since last used version):'
        - '2:Upgraded S6 overlay to version 1.21.2.2.'
        - '2:Upgraded glibc to version 2.26 (Alpine Linux glibc images).'
        - '2:Adjusted the way ownership of /config is taken to better support cases where the folder is mapped to a network share.'
        - 'Small adjustment to the way ownership of files are taken.'
    - version: 1.9.3
      date: 2017-12-12
      changes:
        - 'Now using baseimage v3.1.4, which brings the following changes:'
        - '2:Set 2 worker processes for nginx.'
    - version: 1.9.2
      date: 2017-11-20
      changes:
        - 'Now using baseimage v3.1.3, which brings the following changes:'
        - '2:Upgraded S6 overlay to version 1.21.2.1.'
        - 'Better output of automated conversions: encoding progress now seen in container''s log, while detailed output is redirected to a log file.'
    - version: 1.9.1
      date: 2017-11-07
      changes:
        - 'Now using baseimage v3.1.2, which brings the following changes (from last used version):'
        - '2:Fixed an issue where a self-disabled service could be restarted.'
        - '2:Upgraded S6 overlay to version 1.21.2.0.'
        - '2:Use a more efficient way to monitor status files.'
    - version: 1.9.0
      date: 2017-10-29
      changes:
        - 'Now using baseimage v3.1.0, which brings the following changes:'
        - '2:Upgraded S6 overlay to version 1.21.1.1.'
        - '2:Enhanced integration of service dependencies functionality.'
        - '2:Added a simple log monitor.'
        - '2:Fixed race condition where container''s exit code would not be the expected one.'
        - '2:Fixed issue where application''s GUI fails to displayed when accessing it through the web interface via standard ports 80/443.'
    - version: 1.8.0
      date: 2017-10-09
      changes:
        - 'Now using baseimage v3.0.2, which brings the following changes:'
        - '2:Better support for service dependencies.'
        - '2:Added support for secure access to the application''s GUI.'
    - version: 1.7.0
      date: 2017-09-18
      changes:
        - 'Added support for optical drive(s) access.'
        - 'Removed some useless shortcuts in the video source selection window.'
    - version: 1.6.1
      date: 2017-09-08
      changes:
        - 'Now using baseimage v2.0.8, which brings the following changes (from last used version):'
        - '2:Fixed timezone support on alpine-glibc images.'
        - '2:Fixed duplicated entries in /etc/passwd and /etc/group that were created after a restart of the container.'
    - version: 1.6.0
      date: 2017-08-16
      changes:
        - 'Added libdvdcss to allow reading of encrypted DVD video files.'
    - version: 1.5.9
      date: 2017-08-14
      changes:
        - 'Now using baseimage v2.0.6, which brings the following changes:'
        - '2:Upgraded S6 overlay to version 1.20.0.0.'
    - version: 1.5.8
      date: 2017-08-12
      changes:
        - 'Fixed conversion of videos containing multiple titles.'
    - version: 1.5.7
      date: 2017-07-31
      changes:
        - 'Now using baseimage v2.0.5, which brings the following changes (from last used version):'
        - '2:Clear the environment of the container during startup.'
        - '2:Clear the /tmp folder during startup.'
        - '2:Cleanly terminate the X server when container is restarted/stopped.'
        - '2:Improved robustness of X server starting process.'
        - '2:Removed unneeded files from the image.'
    - version: 1.5.6
      date: 2017-07-27
      changes:
        - 'Watch folder: recursively remove empty directories.'
    - version: 1.5.5
      date: 2017-07-27
      changes:
        - 'Now using baseimage v2.0.3, which brings the following changes:'
        - '2:Improved robustness of the X server starting process.'
    - version: 1.5.4
      date: 2017-07-26
      changes:
        - 'Watch folder: properly support video discs (ISO files, DVD/Blu-ray folders).'
        - 'Watch folder: when removing empty folders, ignore the watch folder itself.'
        - 'Watch folder: make sure to abort if destination file already exists.'
    - version: 1.5.3
      date: 2017-07-25
      changes:
        - 'Fixed HandBrake CLI crash that was occuring when working with ISO files or DVD folders.'
        - 'Small adjustments to the default configuration file.'
    - version: 1.5.2
      date: 2017-07-23
      changes:
        - 'Now using baseimage v2.0.2, which brings the following changes:'
        - '2:Proper VNC port is exposed.'
    - version: 1.5.1
      date: 2017-07-18
      changes:
        - 'Now using baseimage v2.0.1, which brings the following changes:'
        - '2:Internal enhancements.'
        - '2:Clean temporary files left by npm.'
    - version: 1.5.0
      date: 2017-07-17
      changes:
        - 'Now using baseimage v2.0.0, which brings the following changes:'
        - '2:Various internal enhancements.'
        - '2:Fixed the way a service waits for another one.'
        - 'Watch folder: ignore hidden files and folders.'
        - 'Watch folder: adjusted the way empty folders are removed.'
    - version: 1.4.0
      date: 2017-07-04
      changes:
        - 'Watch folder: Make sure to respect the configured umask.'
        - 'Now using baseimage v1.5.0, which brings the following changes:'
        - '2:Added the UMASK environment variable to control how file permissions are set for newly created files.'
        - '2:Added the X11VNC_EXTRA_OPTS environment variable used to pass additional arguments to the x11vnc server.'
        - '2:By default, activate auto-scaling of application''s window.'
        - '2:Applied latest Alpine Linux security updates.'
    - version: 1.3.3
      date: 2017-06-30
      changes:
        - 'Watch folder: Added handling of environment variable AUTOMATED_CONVERSION_OUTPUT_SUBDIR, which allows customization of the output location of automatically converted videos..'
        - 'The default source folder is now /storage.'
    - version: 1.3.2
      date: 2017-06-27
      changes:
        - 'Watch folder: also process files in subfolders.'
    - version: 1.3.1
      date: 2017-06-22
      changes:
        - 'Now using baseimage v1.4.3, which brings the following changes:'
        - '2:Updated Alpine Linux to version 3.6.2.'
    - version: 1.3.0
      date: 2017-06-21
      changes:
        - 'Now using baseimage v1.4.2, which brings the following changes (from last used version):'
        - '2:Switched to Alpine Linux 3.6.'
        - '2:Associate the application''s icon to a unique version to avoid browser cache issues.'
        - '2:Fixed prefix of some service related messages.'
        - '2:Added support for supplying supplementary groups of the application.'
        - '2:Improved process startup and shutdown.'
        - '2:When container is stopped or restarted, processes are now terminated gracefully and in proper order. This allow the GUI application to execute its termination routine.'
        - '2:No more error messages when container is stopped or restarted.'
    - version: 1.2.0
      date: 2017-05-31
      changes:
        - 'Added support for post-conversion hook.'
    - version: 1.1.4
      date: 2017-05-30
      changes:
        - 'Now using baseimage v1.3.2, which brings the following changes:'
        - '2:Fixed password modal window not showing up when required.'
    - version: 1.1.3
      date: 2017-05-26
      changes:
        - 'Watch folder: Fixed issue where, after a first successful conversion, conversion of next available video files would not start.'
        - 'Renamed the ''Watch Folder'' service to ''Automatic Video Converter''.'
    - version: 1.1.2
      date: 2017-05-24
      changes:
        - 'Watch folder: Changed the way files being transferred are detected. Method used previously was not working properly in all cases.'
    - version: 1.1.1
      date: 2017-05-24
      changes:
        - 'Watch folder: temporarily skip files being accessed/transferred.'
        - 'Watch folder: improved robustness.'
    - version: 1.1.0
      date: 2017-05-23
      changes:
        - 'Watch folder: properly support filenames containing spaces.'
        - 'Watch folder: added support for symbolic links.'
        - 'HandBrake debug can now be enabled via the HANDBRAKE_DEBUG environment variable.'
        - 'Take ownership of the `/output` folder.'
        - 'Added the ability to remove video source files from the watch folder after successfully conversion.'
    - version: 1.0.1
      date: 2017-05-18
      changes:
        - 'The watch folder is now monitored without inotify for better compatibility.'
    - version: 1.0.0
      date: 2017-05-18
      changes:
        - 'Initial release.'

container:
  storage_permissions: ro

  # Environment variables.
  environment_variables:
    - name: HANDBRAKE_DEBUG
      description: >-
        When set to `1`, enables {{ app.friendly_name }} debug logging for both the GUI
        and the automatic video converter. For the latter, increased verbosity is
        reflected in `/config/log/hb/conversion.log` (container path). For the GUI, log
        messages are sent to `/config/log/hb/handbrake.debug.log` (container path).
        **NOTE**: When enabled, a large amount of information is generated, and the log
        file grows quickly. Enable this temporarily and only when needed.
      type: public
      default: 0
    - name: HANDBRAKE_GUI
      description: >-
        Setting this to `1` enables the HandBrake GUI; `0` disables it.
      type: public
      default: 1
      unraid_template:
        title: "HandBrake GUI State"
        description: >-
          Setting this to "1" enables the HandBrake GUI, "0" disables it.
        display: advanced
        required: false
        mask: false
    - name: HANDBRAKE_GUI_QUEUE_STARTUP_ACTION
      description: >-
        Action to be taken on the {{ app.friendly_name }} GUI queue at startup. When set
        to `PROCESS`, {{ app.friendly_name }} automatically starts encoding items in the
        queue. When set to `CLEAR`, the queue is cleared. Any other value results in no
        action on the queue.
      type: public
      default: NONE
      unraid_template:
        title: "HandBrake GUI State"
        description: >-
          Action to be taken on the {{ app.friendly_name }} GUI queue at startup. When
          set to "PROCESS", {{ app.friendly_name }} automatically starts encoding items
          in the queue. When set to "CLEAR", the queue is cleared. Any other value
          results in no action on the queue.
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION
      description: >-
        Setting this to `1` enables the automatic video converter, `0` disables
        it.
      type: public
      default: 1
      unraid_template:
        title: "Automatic Video Converter: State"
        description: >-
          Setting this to "1" enables the automatic video converter, "0" disables
          it.
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_PRESET
      description: >-
        {{ app.friendly_name }} preset used by the automatic video converter. The preset
        must be identified in the format `<CATEGORY>/<PRESET NAME>`. See the
        [Automatic Video Conversion](#automatic-video-conversion) section for details.
      type: public
      default: "General/Very Fast 1080p30"
      unraid_template:
        title: "Automatic Video Converter: Preset"
        description: >-
          Preset used by the automatic video converter. The preset must be identified
          in the format 'CATEGORY/PRESET NAME'. Available presets can be seen via the
          {{ app.friendly_name }} GUI.
        display: always
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_FORMAT
      description: >-
        Video container format used by the automatic video converter for output files,
        typically the video filename extension. See the
        [Automatic Video Conversion](#automatic-video-conversion) section for details.
      type: public
      default: mp4
      unraid_template:
        title: "Automatic Video Converter: Format"
        description: >-
          Video container format used by the automatic video converter for output files,
          typically the video filename extension.
        display: always
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_KEEP_SOURCE
      description: >-
        When set to `0`, a successfully converted video is removed from the watch
        folder.
      type: public
      default: 1
      unraid_template:
        title: "Automatic Video Converter: Keep Source Files"
        description: >-
          When set to "0", a successfully converted video is removed from the watch
          folder.
        display: always
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_VIDEO_FILE_EXTENSIONS
      description: >-
        Space-separated list of file extensions considered as video files. By default,
        this list is empty, allowing {{ app.friendly_name }} to automatically detect if
        a file is a video, regardless of its extension (except for extensions defined by
        `AUTOMATED_CONVERSION_NON_VIDEO_FILE_EXTENSIONS`, which are always considered
        non-video). This variable is typically unnecessary but useful when only specific
        video files need conversion.
      type: public
      unraid_template:
        title: "Automatic Video Converter: Video File Extensions"
        description: >-
          Space-separated list of file extensions considered as video files. By default,
          this list is empty, allowing {{ app.friendly_name }} to automatically detect
          if a file is a video, regardless of its extension (except for extensions
          defined by the Non-Video File Extensions list, which are always considered
          non-video). This variable is typically unnecessary but useful when only
          specific video files need conversion.
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_NON_VIDEO_FILE_ACTION
      description: >-
        When set to `ignore`, non-video files in the watch folder are ignored. If set
        to `copy`, non-video files are copied as-is to the output folder.
      type: public
      default: ignore
      unraid_template:
        title: "Automatic Video Converter: Non-Video File Action"
        description: >-
          When set to "ignore", non-video files in the watch folder are ignored. If set
          to "copy", non-video files are copied as-is to the output folder.
        display: always
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_NON_VIDEO_FILE_EXTENSIONS
      description: >-
        Space-separated list of file extensions considered non-video. Most non-video
        files are properly rejected by {{ app.friendly_name }}, but some files, like
        images, may be convertible despite not being videos.
      type: public
      default: jpg jpeg bmp png gif txt nfo
      unraid_template:
        title: "Automatic Video Converter: Non-Video File Extensions"
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_WATCH_DIR
      description: >-
        Path to the watch directory within the container. When set to `AUTO` (the
        default), the path is set to `/watch` for the first watch directory and
        `/watchX` for additional ones, where `X` is the index (e.g., `2` for the
        second). **NOTE**: Ensure a volume mapping for this directory is defined when
        creating the container.
      type: public
      default: AUTO
      unraid_template:
        title: "Automatic Video Converter: Watch Directory"
        description: >-
          Path to the watch directory within the container. When set to "AUTO" (the
          default), the path is set to "/watch" for the first watch directory and
          "/watchX" for additional ones, where "X" is the index (e.g., "2" for the
          second).
        display: always
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_OUTPUT_DIR
      description: >-
        Root directory inside the container where converted videos are written.
        **NOTE**: Ensure a volume mapping for this directory is defined when creating
        the container.
      type: public
      default: /output
      unraid_template:
        title: "Automatic Video Converter: Output Directory"
        description: >-
          Root directory inside the container where converted videos are written.
        display: always
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_OUTPUT_SUBDIR
      description: >-
        Subdirectory of the output folder where converted videos are written. By
        default, videos are saved directly to `/output/`. If set to `Home/Movies`,
        videos are written to `/output/Home/Movies`. Use `SAME_AS_SRC` to match the
        source subfolder. For example, if the source is
        `/watch/Movies/MyMovie/MyMovie.mkv`, the output is written to
        `/output/Movies/MyMovie/`.
      type: public
      unraid_template:
        title: "Automatic Video Converter: Output Subdirectory"
        description: >-
          Subdirectory of the output folder where converted videos are written. By
          default, videos are saved directly to "/output/". If set to "Home/Movies",
          videos are written to "/output/Home/Movies". Use "SAME_AS_SRC" to match the
          source subfolder. For example, if the source is
          "/watch/Movies/MyMovie/MyMovie.mkv", the output is written to
          "/output/Movies/MyMovie/".
        display: always
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_OVERWRITE_OUTPUT
      description: >-
        When set to `1`, allows overwriting an existing destination file.
      type: public
      default: 0
      unraid_template:
        title: "Automatic Video Converter: Overwrite Destination"
        description: >-
          When set to "1", allows overwriting an existing destination file.
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_SOURCE_STABLE_TIME
      description: >-
        Time (in seconds) during which properties (e.g., size, time) of a video file in
        the watch folder must remain unchanged to avoid processing a file being copied.
      type: public
      default: 5
      unraid_template:
        title: "Automatic Video Converter: Source File Stable Time"
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_SOURCE_MIN_DURATION
      description: >-
        Minimum title duration (in seconds). Shorter titles are ignored. Applies only to
        video disc sources (ISO files, `VIDEO_TS` folders, or `BDMV` folders).
      type: public
      default: 10
      unraid_template:
        title: "Automatic Video Converter: Minimum Title Duration"
        description: >-
          Minimum title duration (in seconds). Shorter titles are ignored. Applies only
          to video disc sources (ISO files, "VIDEO_TS" folders, or "BDMV" folders).
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_SOURCE_MAIN_TITLE_DETECTION
      description: >-
        When set to `1`, enables {{ app.friendly_name }}'s main feature title detection
        to guess and select the main title. Applies only to video disc sources (ISO
        files, `VIDEO_TS` folders, or `BDMV` folders).
      type: public
      default: 0
      unraid_template:
        title: "Automatic Video Converter: Main Title Detection"
        description: >-
          When set to "1", enables {{ app.friendly_name }}'s main feature title
          detection to guess and select the main title. Applies only to video disc
          sources (ISO files, "VIDEO_TS" folders, or "BDMV" folders).
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_CHECK_INTERVAL
      description: >-
        Interval (in seconds) at which the automatic video converter checks for new
        files.
      type: public
      default: 5
      unraid_template:
        title: "Automatic Video Converter: Check Interval"
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_MAX_WATCH_FOLDERS
      description: >-
        Maximum number of watch folders handled by the automatic video converter.
      type: public
      default: 5
      unraid_template:
        title: "Automatic Video Converter: Number of Watch Folders"
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_NO_GUI_PROGRESS
      description: >-
        When set to `1`, progress of videos converted by the automatic video converter
        is not shown in the {{ app.friendly_name }} GUI.
      type: public
      default: 0
      unraid_template:
        title: "Automatic Video Converter: Disable Progress in GUI"
        description: >-
          When set to "1", progress of videos converted by the automatic video converter
          is not shown in the {{ app.friendly_name }} GUI.
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_HANDBRAKE_CUSTOM_ARGS
      description: >-
        Custom arguments to pass to {{ app.friendly_name }} during conversion.
      type: public
      unraid_template:
        title: "Automatic Video Converter: Custom HandBrake Arguments"
        display: advanced
        required: false
        mask: false
    - name: AUTOMATED_CONVERSION_USE_TRASH
      description: >-
        When set to `1`, the automatic video converter uses the trash directory. This
        applies only when the converter is configured not to keep source files. In that
        case, they will be moved to the trash directory (`/trash` inside the container
        by default) instead of being permanently deleted.
      type: public
      default: 0
      unraid_template:
        title: "Automatic Video Converter: Use Trash Directory"
        description: >-
          When set to "1", the automatic video converter uses the trash directory. This
          applies only when the converter is configured not to keep source files. In
          that case, they will be moved to the trash directory ("/trash" inside the
          container by default) instead of being permanently deleted.
        display: advanced
        required: false
        mask: false

    - name: AUTOMATED_CONVERSION_TRASH_DIR
      description: >-
        Location of the trash directory inside the container.
      type: public
      default: /trash
      unraid_template:
        title: "Automatic Video Converter: Trash Directory"
        description: >-
          Location of the trash directory inside the container.
        display: advanced
        required: false
        mask: false

  # Volumes
  volumes:
    - container_path: /watch
      host_path_example: "/home/user/HandBrake/watch"
      description: >-
        The location for videos to be automatically converted.
      permissions: rw
      include_in_quick_start: true
      unraid_template:
        title: Watch Directory
        display: always
        required: false
        mask: false
    - container_path: /output
      host_path_example: "/home/user/HandBrake/output"
      description: >-
        The destination for converted video files.
      permissions: rw
      include_in_quick_start: true
      unraid_template:
        title: Output Directory
        display: always
        required: true
        mask: false
    - container_path: /trash
      host_path_example: "/home/user/HandBrake/trash"
      description: >-
        When trash usage is enabled, converted source files are moved here instead of
        being deleted.
      permissions: rw
      unraid_template:
        title: Trash Directory
        display: advanced
        required: false
        mask: false

  # Network ports
  ports: []

  # Devices
  devices: []
